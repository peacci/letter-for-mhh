<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>给梅花花的一封信</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@400;700&family=Dancing+Script:wght@700&display=swap');

        :root {
            --envelope-light-pink: #f8e1e4;
            --envelope-dark-pink: #f0c8d2;
            --paper-cream: #fff9f9;
            --paper-light: #fff0f0;
            --text-brown: #7a4b4b;
            --accent-pink: #e67e7e;
            --deep-blue: #0a0e2a;
            --soft-blue: #2a3b6f;
            --light-blue: #8ecae6;
            --moon-color: #FFE4B5; /* 奶黄色月亮 */
            --envelope-flap: #f5c6d6;
            --moon-crater: #E6C9A1; /* 月亮坑洞颜色 */
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Noto Serif SC', serif;
            color: var(--text-brown);
            background: linear-gradient(to bottom, var(--deep-blue) 66%, var(--light-blue) 100%); /* 星空占2/3 */
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* 深邃星空背景 - 占据网页的三分之二 */
        .stars-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 66%; /* 占据网页的三分之二 */
            z-index: -2;
        }

        .star {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            animation: breathe 3s infinite ease-in-out; /* 星光呼吸效果 */
        }

        @keyframes breathe {
            0%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
                box-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
            }
            50% {
                transform: scale(1.2);
                opacity: 1;
                box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
            }
        }

        /* 流星效果 */
        .shooting-star {
            position: absolute;
            width: 1px;
            height: 1px;
            background-color: white;
            animation: shooting 3s linear infinite;
            transform-origin: top left;
        }

        @keyframes shooting {
            0% {
                transform: rotate(35deg) translateX(0) translateY(0);
                opacity: 1;
            }
            100% {
                transform: rotate(35deg) translateX(300px) translateY(300px);
                opacity: 0;
            }
        }

        /* 优化后的月亮样式 - 奶黄色 */
        .moon {
            position: absolute;
            top: 10%;
            left: 10%;
            width: clamp(80px, 20vw, 120px); /* 响应式大小 */
            height: clamp(80px, 20vw, 120px);
            z-index: -1;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .moon-core {
            width: 80%;
            height: 80%;
            background-color: var(--moon-color); /* 奶黄色月亮 */
            border-radius: 50%;
            box-shadow: 0 0 clamp(15px, 3vw, 30px) clamp(5px, 1vw, 15px) rgba(255, 228, 181, 0.3); /* 响应式光晕 */
            position: relative;
            overflow: hidden; /* 确保坑洞不会超出月亮边缘 */
            transform: rotate(-15deg); /* 轻微旋转以展示更多纹理 */
        }

        /* 月亮表面纹理 - 增强版 */
        .moon-core::before {
            content: '';
            position: absolute;
            top: 20%;
            left: 30%;
            width: clamp(10px, 2.5vw, 25px); /* 增大主要纹理 */
            height: clamp(10px, 2.5vw, 25px);
            background-color: rgba(230, 201, 161, 0.7); /* 更明显的坑洞颜色 */
            border-radius: 50%;
            box-shadow: 
                clamp(8px, 1.6vw, 20px) clamp(12px, 2.4vw, 30px) 0 -clamp(3px, 0.6vw, 7px) rgba(230, 201, 161, 0.7), /* 更深的阴影 */
                -clamp(10px, 2vw, 25px) clamp(8px, 1.6vw, 20px) 0 -clamp(2px, 0.4vw, 5px) rgba(230, 201, 161, 0.6),
                clamp(15px, 3vw, 35px) clamp(5px, 1vw, 12px) 0 -clamp(4px, 0.8vw, 10px) rgba(230, 201, 161, 0.5),
                clamp(20px, 4vw, 45px) clamp(20px, 4vw, 45px) 0 -clamp(5px, 1vw, 12px) rgba(230, 201, 161, 0.4); /* 添加更多纹理 */
        }

        /* 增加更多不同大小的坑洞 */
        .moon-core::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 60%;
            width: clamp(6px, 1.5vw, 15px);
            height: clamp(6px, 1.5vw, 15px);
            background-color: rgba(230, 201, 161, 0.8); /* 更深的坑洞颜色 */
            border-radius: 50%;
            box-shadow:        
        }

                
        /* 多层光晕效果 */
        .moon-glow-1 {
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255, 228, 181, 0.4) 0%, rgba(255, 228, 181, 0) 70%);
            border-radius: 50%;
            animation: pulse 8s infinite ease-in-out;
        }

        .moon-glow-2 {
            position: absolute;
            width: 120%;
            height: 120%;
            background: radial-gradient(circle, rgba(255, 228, 181, 0.2) 0%, rgba(255, 228, 181, 0) 70%);
            border-radius: 50%;
            animation: pulse 12s infinite ease-in-out reverse;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(0.9);
                opacity: 0.8;
            }
            50% {
                transform: scale(1.1);
                opacity: 1;
            }
        }

        /* 主场景 */
        .scene {
            width: 100%;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
        }

        /* 信封容器 - 响应式设计 */
        .envelope-container {
            width: clamp(280px, 80vw, 500px); /* 响应式宽度 */
            height: clamp(168px, 48vw, 300px); /* 保持比例 */
            position: relative;
            transition: all 0.3s ease;
            filter: drop-shadow(0 10px 20px rgba(126, 182, 204, 0.3));
        }

        /* 信封背面 */
        .envelope-back {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--envelope-light-pink) 0%, var(--envelope-dark-pink) 100%);
            border-radius: clamp(6px, 1.2vw, 10px); /* 响应式圆角 */
            position: absolute;
            box-shadow:
                0 15px 40px rgba(126, 182, 204, 0.4),
                inset 0 0 0 1px rgba(255, 255, 255, 0.2),
                inset 0 0 30px rgba(255, 255, 255, 0.2);
            z-index: 1;
            transition: opacity 0.4s ease 0.6s;
        }

        /* 信封前面 */
        .envelope-front {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--envelope-light-pink) 0%, var(--envelope-dark-pink) 100%);
            border-radius: clamp(6px, 1.2vw, 10px); /* 响应式圆角 */
            position: absolute;
            z-index: 3;
            cursor: pointer;
            box-shadow:
                inset 0 0 0 1px rgba(255, 255, 255, 0.3),
                inset 0 0 30px rgba(255, 255, 255, 0.3);
        }

        /* 信封翻盖 */
        .envelope-flap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transform-origin: top;
            transition: transform 0.6s cubic-bezier(0.33, 1, 0.68, 1);
            z-index: 4;
        }

        .envelope-flap:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 0;
            border-left: clamp(140px, 40vw, 250px) solid transparent; /* 响应式三角形 */
            border-right: clamp(140px, 40vw, 250px) solid transparent;
            border-top: clamp(84px, 24vw, 150px) solid var(--envelope-flap);
            transform-origin: top;
            transition: inherit;
            box-shadow: 0 -5px 10px rgba(0, 0, 0, 0.1);
        }

        /* 打开信封时翻盖的动画 */
        .envelope-opened .envelope-flap {
            transform: rotateX(-180deg);
        }

        /* 邮票 - 响应式设计 */
        .stamp {
            position: absolute;
            width: clamp(42px, 8.4vw, 70px); /* 响应式大小 */
            height: clamp(48px, 9.6vw, 80px);
            top: clamp(18px, 3.6vw, 30px); /* 响应式位置 */
            right: clamp(18px, 3.6vw, 30px);
            background-size: cover;
            background-position: center;
            border-radius: clamp(5px, 1vw, 8px); /* 响应式圆角 */
            transform: rotate(15deg);
            box-shadow:
                0 3px 8px rgba(0, 0, 0, 0.15),
                inset 0 0 0 1px rgba(255, 255, 255, 0.2);
            z-index: 5;
            overflow: hidden;
            transition: opacity 0.3s ease 0.3s;
        }

        .stamp:after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                linear-gradient(45deg, transparent 48%, rgba(255, 255, 255, 0.8) 50%, transparent 52%),
                linear-gradient(-45deg, transparent 48%, rgba(255, 255, 255, 0.8) 50%, transparent 52%);
            background-size: clamp(9px, 1.8vw, 15px) clamp(9px, 1.8vw, 15px); /* 响应式网格大小 */
            opacity: 0.3;
        }

        /* 折叠的信件部分 - 响应式设计 */
        .folded-letter {
            width: clamp(268px, 76vw, 480px); /* 响应式宽度 */
            height: clamp(36px, 7.2vw, 60px); /* 响应式高度 */
            background: linear-gradient(to bottom right, var(--paper-cream), var(--paper-light));
            position: absolute;
            bottom: clamp(6px, 1.2vw, 10px); /* 响应式位置 */
            left: clamp(6px, 1.2vw, 10px);
            border-radius: clamp(5px, 1vw, 8px) clamp(5px, 1vw, 8px) 0 0; /* 响应式圆角 */
            z-index: 2;
            transition: all 0.6s cubic-bezier(0.33, 1, 0.68, 1);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            overflow: hidden;
        }

        /* 展开的信件 - 响应式设计 */
        .unfolded-letter {
            width: clamp(268px, 88vw, 480px); /* 响应式宽度 */
            height: clamp(240px, 80vw, 400px); /* 响应式高度 */
            background: linear-gradient(to bottom right, var(--paper-cream), var(--paper-light));
            position: absolute;
            top: clamp(6px, 1.2vw, 10px); /* 响应式位置 */
            left: clamp(6px, 1.2vw, 10px);
            border-radius: clamp(5px, 1vw, 8px); /* 响应式圆角 */
            z-index: 6;
            transition: all 0.8s cubic-bezier(0.33, 1, 0.68, 1) 0.4s;
            transform: translateY(100%) scaleY(0);
            transform-origin: top;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            opacity: 0;
            overflow: auto;
            cursor: pointer;
        }

        /* 全屏信纸状态 - 响应式设计 */
        .envelope-opened .unfolded-letter {
            width: 90vw;
            height: 85vh;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scaleY(1);
            opacity: 1;
            z-index: 20;
            border-radius: clamp(8px, 1.6vw, 15px); /* 响应式圆角 */
            box-shadow: 0 20px 60px rgba(255, 173, 173, 0.5);
        }

        /* 隐藏滚动条 */
        .unfolded-letter::-webkit-scrollbar {
            display: none;
        }

        /* 信纸内容 - 响应式设计 */
        .letter-content {
            width: 100%;
            min-height: 100%;
            padding: clamp(20px, 4vw, 40px); /* 响应式内边距 */
            box-sizing: border-box;
            position: relative;
            /* 更明显的方格底纹 */
            background-image: 
                linear-gradient(to right, rgba(255, 200, 200, 0.2) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(255, 200, 200, 0.2) 1px, transparent 1px);
            background-size: clamp(15px, 3vw, 25px) clamp(15px, 3vw, 25px); /* 响应式方格大小 */
        }

        /* 信纸装饰 - 顶部花边 */
        .letter-content:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: clamp(20px, 4vw, 30px);
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='10' viewBox='0 0 100 10'%3E%3Cpath d='M0,5 Q25,15 50,5 T100,5' fill='none' stroke='%23ffccd5' stroke-width='1.5'/%3E%3C/svg%3E");
            background-repeat: repeat-x;
            background-position: top center;
            background-size: clamp(100px, 20vw, 200px) clamp(10px, 2vw, 15px);
        }

        /* 信纸装饰 - 底部花边 */
        .letter-content:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: clamp(20px, 4vw, 30px);
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='10' viewBox='0 0 100 10'%3E%3Cpath d='M0,5 Q25,-5 50,5 T100,5' fill='none' stroke='%23ffccd5' stroke-width='1.5'/%3E%3C/svg%3E");
            background-repeat: repeat-x;
            background-position: bottom center;
            background-size: clamp(100px, 20vw, 200px) clamp(10px, 2vw, 15px);
        }

        /* 信纸装饰 - 左侧装饰 */
        .letter-decoration-left {
            position: absolute;
            top: clamp(30px, 6vw, 50px);
            left: clamp(10px, 2vw, 15px);
            bottom: clamp(30px, 6vw, 50px);
            width: clamp(15px, 3vw, 25px);
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='100' viewBox='0 0 20 100'%3E%3Cpath d='M10,0 Q15,25 10,50 T10,100' fill='none' stroke='%23ffccd5' stroke-width='1'/%3E%3Ccircle cx='10' cy='25' r='2' fill='%23ffccd5'/%3E%3Ccircle cx='10' cy='75' r='2' fill='%23ffccd5'/%3E%3C/svg%3E");
            background-repeat: repeat-y;
            background-position: center;
            background-size: clamp(15px, 3vw, 25px) clamp(100px, 20vw, 200px);
        }

        /* 信纸装饰 - 右侧装饰 */
        .letter-decoration-right {
            position: absolute;
            top: clamp(30px, 6vw, 50px);
            right: clamp(10px, 2vw, 15px);
            bottom: clamp(30px, 6vw, 50px);
            width: clamp(15px, 3vw, 25px);
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='100' viewBox='0 0 20 100'%3E%3Cpath d='M10,0 Q5,25 10,50 T10,100' fill='none' stroke='%23ffccd5' stroke-width='1'/%3E%3Ccircle cx='10' cy='25' r='2' fill='%23ffccd5'/%3E%3Ccircle cx='10' cy='75' r='2' fill='%23ffccd5'/%3E%3C/svg%3E");
            background-repeat: repeat-y;
            background-position: center;
            background-size: clamp(15px, 3vw, 25px) clamp(100px, 20vw, 200px);
        }

        .letter-content p {
            margin-bottom: clamp(15px, 3vw, 25px); /* 响应式间距 */
            position: relative;
            padding-left: clamp(18px, 3.6vw, 30px); /* 响应式缩进 */
            line-height: 1.9;
            font-size: clamp(14px, 2.8vw, 18px); /* 响应式字体大小 */
            z-index: 1;
        }

        .letter-content p:before {
            content: '❀';
            position: absolute;
            left: 0;
            color: #ffb6b6;
            font-size: clamp(16px, 3.2vw, 20px); /* 响应式图标大小 */
        }

        .signature {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(24px, 4.8vw, 36px); /* 响应式字体大小 */
            text-align: right;
            margin-top: clamp(24px, 4.8vw, 40px); /* 响应式间距 */
            color: var(--accent-pink);
            z-index: 1;
            position: relative;
            
        }.signatures {
            font-family: 'Dancing Script', cursive;
            font-size: clamp(24px, 4.8vw, 36px); /* 响应式字体大小 */
            text-align: left;
            margin-top: clamp(24px, 4.8vw, 40px); /* 响应式间距 */
            color: var(--accent-pink);
            z-index: 1;
            position: relative;
        }

        .date {
            text-align: right;
            font-size: clamp(12px, 2.4vw, 16px); /* 响应式字体大小 */
            color: #c99;
            margin-top: clamp(6px, 1.2vw, 10px); /* 响应式间距 */
            z-index: 1;
            position: relative;
        }

        /* 提示文字 - 响应式设计 */
        .hint {
            position: absolute;
            bottom: clamp(30px, 6vw, 50px); /* 响应式位置 */
            width: 100%;
            text-align: center;
            color: var(--accent-pink);
            font-size: clamp(14px, 2.8vw, 18px); /* 响应式字体大小 */
            transition: all 0.3s ease;
            pointer-events: none;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.5);
        }

        .envelope-opened .hint {
            opacity: 0;
        }

        /* 提示关闭的文字 - 响应式设计 */
        .close-hint {
            position: absolute;
            bottom: clamp(18px, 3.6vw, 30px); /* 响应式位置 */
            width: 100%;
            text-align: center;
            color: var(--accent-pink);
            font-size: clamp(12px, 2.4vw, 16px); /* 响应式字体大小 */
            opacity: 0;
            transition: all 0.3s ease 0.8s;
            pointer-events: none;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.5);
        }

        .envelope-opened .close-hint {
            opacity: 1;
        }

        /* 花瓣效果 - 确保在信件之上 */
        .petals-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 25;
        }

        .petal {
            position: absolute;
            width: clamp(9px, 1.8vw, 15px); /* 响应式大小 */
            height: clamp(9px, 1.8vw, 15px);
            background-color: #FFB6C1;
            opacity: 0.8;
            clip-path: ellipse(40% 50% at 50% 50%);
            transform: rotate(-45deg);
            animation: falling linear infinite;
        }

        @keyframes falling {
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }

    </style>
</head>

<body>
    <!-- 深邃星空背景 -->
    <div class="stars-bg" id="stars-bg"></div>

    <!-- 优化后的月亮 -->
    <div class="moon">
        <div class="moon-core"></div>
        <div class="moon-glow-1"></div>
        <div class="moon-glow-2"></div>
        <div class="moon-craters">
            <!-- 动态生成的坑洞 -->
        </div>
    </div>

    <!-- 花瓣效果 -->
    <div class="petals-container" id="petals-container"></div>

    <!-- 主场景 -->
    <div class="scene">
        <div class="envelope-container" id="envelope-container">
            <div class="envelope-back"></div>

            <!-- 展开的信件 -->
            <div class="unfolded-letter" id="unfolded-letter">
                <div class="letter-content">
                    <div class="letter-decoration-left"></div>
                    <div class="letter-decoration-right"></div>
                    
                    <div class="signatures">亲爱的梅花花：</div>

    <p>生日快乐呀！！！🎂</p>

     <p>作为我们认识后，梅花花度过的第一个生日，我没有办法送很棒很棒的礼物，但还是想为梅花花准备一些什么。至少，提供一些可能的情绪价值吧！</p> 
    <p>所以呢，如果没有耐心看完接下来的文字<a href="https://peacci.github.io/best-wish-for-you/">点击这里</a>查看给梅花花准备的赛博礼物（打开的时候注意音量！）</p>
    <p>虽然认识还不到真正意义上的一年，但是我们却不知不觉之间一起度过了一轮四季哦。</p>
    <p>秋天是我们认识的季节，这是一个让我感到幸运的秋天。因为认识了梅花花。冬天是寒冷的季节，但是因为有梅花花的存在，就算遇到了很多糟糕的事情，这个冬天也似乎比往常温暖。春天我们终于见了第二次面，梅花花记得我的话，送了我小豆泥，这是最开心的一天。夏天嘛，就是我们的生日，虽然没有生日礼物，但是有梅花花的生日歌，我感到好幸福。</p>
    <p>有这么一句话：“我始终觉得，能被人记录，是一件很幸福的事情。”，我不知道梅花花是否赞同这句话，但是因为认识梅花花让我感受到幸福，和梅花花一起听梅花花的歌单的时候很幸福，听梅花花讲梅花花喜欢的事情的时候也很幸福，收到梅花花礼物的时候很幸福，梅花花分享自己照片给我的时候很幸福，梅花花唱歌给我听的时候很幸福，甚至梅花花叫我小桃的时候我也感到幸福……<p>
    <p>正是这些一个个微小的瞬间，让我觉得好吧这个世界还不错，这个城市也挺好。所以我重新写起日记，记录我的生活，也写了很多关于梅花花的那些小事，想要通过这种方式，在某一天，给梅花花，也给身边的人带来一丝丝幸福。（虽然在这件事情上我做得真的很差，但我想说，我很糟糕从来从来都和梅花花没有关系。梅花花从来都是那个带来让我知道我哪里不够好，让我想要变得越来越好的人。）</p>
    <p>在我的心里，梅花花一直都是一个善良，真诚，美好且优秀的人。但有的时候梅花花会说自己不够好，每次听到这些话，我都好想超大声地反驳：“才没有！！！”，所以，某天网络冲浪的灵感，让我决定写下<a href="https://peacci.github.io/best-wish-for-you/">梅花花的一百个优点</a>，即使可能是自我感动，我也想要让梅花花看到自己有多么好！</p>
    <p>而那些微不足道的缺点，就当它们是特别的点缀，组成了这样一个独特的梅花花。有缺点的真实的梅花花，真的很可爱。记得梅花花问我，我居然能够接受梅花花的缺点。但我想说，梅花花不也同样的包容了，接纳了有大大缺点的我吗？在我的缺点面前，梅花花说的那些自己的缺点，根本就是微不足道吧！总之呢，希望梅花花可以喜欢这份生日礼物。不喜欢也没关系，那就等我赚大钱了给梅花花买喜欢的＾_＾</p>
    <p>最后的最后，再次祝梅花花二十三岁生日快乐！永远健康，永远快乐，永远幸福！想要的都得到！</p>
    <p>( ˶˙ᵕ˙˶ )♡</p>
    
                    <div class="signature">小桃</div>
                    <div class="date">2025年7月</div>
                </div>
            </div>

            <!-- 折叠的信件部分 -->
            <div class="folded-letter"></div>

            <div class="envelope-front" id="envelope-front">
                <div class="envelope-flap"></div>
                <div class="stamp" style="background-image: url('https://gd-hbimg.huaban.com/0e681bec9cb9d0b2728d5f73d27c4ccc9abcc91e275e0-h6msSq')"></div>
            </div>

            <div class="hint">点击信封打开</div>
            <div class="close-hint">点击信件关闭</div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const envelopeContainer = document.getElementById('envelope-container');
            const envelopeFront = document.getElementById('envelope-front');
            const unfoldedLetter = document.getElementById('unfolded-letter');
            const petalsContainer = document.getElementById('petals-container');
            const starsBg = document.getElementById('stars-bg');
            const moonCraters = document.querySelector('.moon-craters');

            // 创建深邃星空背景
            createStars();

            // 创建花瓣
            createPetals();

            // 创建流星
            createShootingStars();

            // 创建更多月亮坑洞
            createMoonCraters();

            // 点击信封前面打开
            envelopeFront.addEventListener('click', function () {
                toggleEnvelope();
            });

            // 点击展开的信件关闭
            unfoldedLetter.addEventListener('click', function (e) {
                toggleEnvelope();
            });

            function toggleEnvelope() {
                if (envelopeContainer.classList.contains('envelope-opened')) {
                    // 关闭信件
                    envelopeContainer.classList.remove('envelope-opened');
                    document.body.style.overflow = 'auto';

                    // 添加关闭动画延迟
                    setTimeout(() => {
                        envelopeFront.style.pointerEvents = 'auto';
                    }, 1500);
                } else {
                    // 打开信件
                    envelopeContainer.classList.add('envelope-opened');
                    document.body.style.overflow = 'hidden';

                    // 防止重复点击
                    envelopeFront.style.pointerEvents = 'none';
                    setTimeout(() => {
                        envelopeFront.style.pointerEvents = 'auto';
                    }, 1500);
                }
            }

            function createPetals() {
                for (let i = 0; i < 40; i++) {
                    const petal = document.createElement('div');
                    petal.classList.add('petal');

                    // 随机位置和大小
                    const size = Math.random() * 15 + 5;
                    petal.style.width = `${size}px`;
                    petal.style.height = `${size}px`;
                    petal.style.left = `${Math.random() * 100}vw`;
                    petal.style.top = `${Math.random() * -50}vh`;

                    // 随机动画时间和延迟
                    const duration = Math.random() * 20 + 10;
                    const delay = Math.random() * 15;
                    petal.style.animationDuration = `${duration}s`;
                    petal.style.animationDelay = `${delay}s`;

                    // 随机透明度
                    petal.style.opacity = Math.random() * 0.6 + 0.2;

                    // 随机颜色，创建更自然的效果
                    const hue = Math.random() * 20 + 340;
                    const saturation = Math.random() * 30 + 70;
                    const lightness = Math.random() * 10 + 75;
                    petal.style.backgroundColor = `hsl(${hue}, ${saturation}%, ${lightness}%)`;

                    petalsContainer.appendChild(petal);
                }
            }

            function createStars() {
                const count = 500;
                for (let i = 0; i < count; i++) {
                    const star = document.createElement('div');
                    star.classList.add('star');

                    // 随机位置和大小
                    star.style.left = `${Math.random() * 100}%`;
                    star.style.top = `${Math.random() * 66}%`; // 限制在星空区域

                    // 不同大小的星星
                    const size = Math.random() * 2 + 1;
                    star.style.width = `${size}px`;
                    star.style.height = `${size}px`;

                    // 随机动画延迟和持续时间，创建更自然的闪烁效果
                    star.style.animationDelay = `${Math.random() * 5}s`;
                    star.style.animationDuration = `${Math.random() * 3 + 2}s`;

                    // 随机亮度
                    const brightness = Math.random() * 0.8 + 0.2;
                    star.style.opacity = brightness;

                    // 少数星星会更亮更大，模拟行星
                    if (Math.random() < 0.1) {
                        star.style.width = `${Math.random() * 3 + 2}px`;
                        star.style.height = star.style.width;
                        star.style.animationDuration = `${Math.random() * 5 + 3}s`;
                        star.style.opacity = Math.random() * 0.4 + 0.6;

                        // 极少数星星有微弱的光晕
                        if (Math.random() < 0.2) {
                            star.style.boxShadow = `0 0 ${Math.random() * 5 + 5}px white`;
                        }
                    }

                    starsBg.appendChild(star);
                }
            }

            function createShootingStars() {
                const count = 10;
                for (let i = 0; i < count; i++) {
                    const shootingStar = document.createElement('div');
                    shootingStar.classList.add('shooting-star');

                    // 随机位置
                    shootingStar.style.left = `${Math.random() * 100}%`;
                    shootingStar.style.top = `${Math.random() * 30}%`; // 流星从顶部出现

                    // 随机动画延迟
                    shootingStar.style.animationDelay = `${Math.random() * 15}s`;

                    starsBg.appendChild(shootingStar);
                }
            }

            function createMoonCraters() {
                // 清空现有的坑洞
                moonCraters.innerHTML = '';
                
                // 创建更多不同大小和位置的坑洞
                const craterCount = 10;
                const moonCore = document.querySelector('.moon-core');
                const moonSize = moonCore.offsetWidth;
                
                for (let i = 0; i < craterCount; i++) {
                    const crater = document.createElement('div');
                    crater.classList.add('moon-crater');
                    
                    // 确保坑洞大小不会超出月亮边缘
                    const maxCraterSize = moonSize * 0.15; // 最大坑洞为月亮直径的15%
                    const craterSize = Math.random() * maxCraterSize + (moonSize * 0.03); // 最小3%直径
                    
                    // 确保坑洞不会超出月亮边缘
                    const maxPos = moonSize - craterSize;
                    const x = Math.random() * maxPos;
                    const y = Math.random() * maxPos;
                    
                    // 设置坑洞位置和大小
                    crater.style.width = `${craterSize}px`;
                    crater.style.height = `${craterSize}px`;
                    crater.style.left = `${x}px`;
                    crater.style.top = `${y}px`;
                    
                    // 随机不透明度，使坑洞看起来有层次感
                    const opacity = Math.random() * 0.3 + 0.4;
                    crater.style.opacity = opacity;
                    
                    moonCraters.appendChild(crater);
                }
            }

            // 窗口大小改变时重新创建月亮坑洞
            window.addEventListener('resize', createMoonCraters);
        });
    </script>
</body>

</html>
    